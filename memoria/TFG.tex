\documentclass[a4paper,11pt]{book}
%\documentclass[a4paper,twoside,11pt,titlepage]{book}
\usepackage{listingsutf8}
\usepackage[utf8]{inputenc}
\usepackage[spanish,es-noquoting]{babel}
\usepackage{bbold}
\usepackage{amssymb} % nleq
\usepackage{caption}
\usepackage{amsmath} % gather & align
\usepackage{amsthm} % proof
\usepackage{multicol}
\setlength{\columnsep}{2cm}
\renewcommand\qedsymbol{$\blacksquare$}
\usepackage[toc,page]{appendix}
\renewcommand{\appendixtocname}{Apéndices}
\renewcommand{\appendixpagename}{Apéndices}
\renewcommand{\appendixname}{Apéndice}
\appendixtitleon

% \usepackage[style=list, number=none]{glossary} %
%\usepackage{titlesec}
%\usepackage{pailatino}

\decimalpoint
\usepackage{dcolumn}
\newcolumntype{.}{D{.}{\esperiod}{-1}}
\makeatletter
\addto\shorthandsspanish{\let\esperiod\es@period@code}
\makeatother


%\usepackage[chapter]{algorithm}
\RequirePackage{verbatim}
%\RequirePackage[Glenn]{fncychap}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{afterpage}

\usepackage{longtable}

\usepackage[pdfborder={000}]{hyperref} %referencia

% Inference rules
\usepackage{semantic}
\reservestyle{\reservedWord}{\mathrel}
\reservedWord[\mathbf]{if,then,elif,else,typeof,variant,match,with,and,or,not,xor,of,lambda}
\reservestyle{\operator}{\mathrel}
\operator[\mathbf]{:=,:,;,<:,::,->}

% EBNF
\usepackage{array}

\newenvironment{grammar}[2]
 {\hspace{3cm}\begin{tabular}{@{\qquad}>{$\mid}l<{$}@{\qquad}l@{}}
  \multicolumn{1}{@{}l@{}}{$#1\ =$}&\multicolumn{1}{l@{}}{\hspace{-2em}#2}\\}
 {\end{tabular}}

% ********************************************************************
% Re-usable information
% ********************************************************************
\newcommand{\myOfficialTitle}{Aplicación de la teoría de tipos en el diseño de un lenguaje de programación orientado a la inteligencia artificial e implementación de su compilador}
\newcommand{\myOfficialTitleEng}{Aplication of Type Theory in the design of an artificial intelligence oriented programming language and its compiler implementation}
\newcommand{\myTitle}{Aplicación de la teoría de tipos en el diseño de un lenguaje de programación orientado a la inteligencia artificial e implementación de su compilador}
\newcommand{\myDegree}{Doble Grado en Ingeniería Informática y matemáticas}
\newcommand{\myName}{Bruno Santidrián Manzanedo}
\newcommand{\myProf}{Ramón López-Cózar Delgado}
\newcommand{\myOtherProf}{\xspace}
%\newcommand{\mySupervisor}{Put name here\xspace}
\newcommand{\myFaculty}{Escuela Técnica Superior de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myFacultyShort}{E.T.S. de Ingenierías Informática y de
Telecomunicación\xspace}
\newcommand{\myDepartment}{Departamento de lenguajes y sistemas informáticos}
\newcommand{\myUni}{\protect{Universidad de Granada}}
\newcommand{\myLocation}{Granada}
\newcommand{\myTime}{\today}
\newcommand{\myVersion}{Version 0.1}
\newcommand{\keywords}{teoría de lenguajes de programación, teoría de tipos, inteligencia artificial, compiladores}
\newcommand{\keywordsEng}{programming languages theory, type theory, artificial intelligence, compilers}
\newcommand*{\rom}[1]{\uppercase\expandafter{\romannumeral #1\relax}}


\hypersetup{
pdfauthor = {\myName (smbruno@correo.ugr.es)},
pdftitle = {\myTitle},
pdfsubject = {Lenguajes de programación},
pdfkeywords = {\keywords},
pdfcreator = {LaTeX con el paquete ....},
pdfproducer = {pdflatex}
}

%\hyphenation{}


%\usepackage{doxygen/doxygen}
%\usepackage{pdfpages}
\usepackage{url}
\usepackage{colortbl,longtable}
\usepackage[stable]{footmisc}
%\usepackage{index}

%\makeindex
%\usepackage[style=long, cols=2,border=plain,toc=true,number=none]{glossary}
% \makeglossary

% Definición de comandos que me son tiles:
%\renewcommand{\indexname}{Índice alfabético}
%\renewcommand{\glossaryname}{Glosario}

\pagestyle{fancy}
\fancyhf{}
\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[RO,LE]{\textbf{\thepage}}
\renewcommand{\chaptermark}[1]{\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\markright{\textbf{\thesection. #1}}}

\setlength{\headheight}{1.5\headheight}

\newcommand{\HRule}{\rule{\linewidth}{0.5mm}}
%Definimos los tipos teorema, ejemplo y definición podremos usar estos tipos
%simplemente poniendo \begin{teorema} \end{teorema} ...
\newtheorem{theorem}{Teorema}[chapter]
\newtheorem{example}{Ejemplo}[chapter]
\newtheorem{proposition}{Proposición}[chapter]
\newtheorem{definition}{Definición}[chapter]

\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}
\definecolor{gray30}{gray}{.94}

\lstset{ frame=Ltb,
     framerule=0.5pt,
     aboveskip=0.5cm,
     framextopmargin=3pt,
     framexbottommargin=3pt,
     framexleftmargin=0.1cm,
     framesep=0pt,
     rulesep=.4pt,
     backgroundcolor=\color{gray97},
     rulesepcolor=\color{black},
     %
     stringstyle=\ttfamily,
     showstringspaces = false,
     basicstyle=\scriptsize\ttfamily,
     commentstyle=\color{gray45},
     keywordstyle=\bfseries,
     %
     numbers=left,
     numbersep=6pt,
     numberstyle=\tiny,
     numberfirstline = false,
     breaklines=true,
   }

% minimizar fragmentado de listados
\lstnewenvironment{listing}[1][]
   {\lstset{#1}\pagebreak[0]}{\pagebreak[0]}

\usepackage{color}
\definecolor{myred}{cmyk}{0, 0.87, 0.77, 0.09}
\definecolor{mygreen}{cmyk}{0.02,0,0.64,0.25}
\definecolor{okgreen}{cmyk}{0.29,0,0.52,0.42}
\definecolor{myyellow}{cmyk}{0,0.18,1,0.33}
\definecolor{myblue}{cmyk}{1,0.13,0,0.28}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{backgray}{rgb}{0.95,0.95,0.95}
\definecolor{fontgray}{cmyk}{0,0,0,0.84}


\lstdefinestyle{tail}
   {
  inputencoding=utf8,
  texcl=true,
	frame=single,
	language=python,
	backgroundcolor=\color{backgray},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
  basicstyle=\scriptsize\ttfamily,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{myblue},    % comment style
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywords={if,then,elif,else,typeof,variant,match,with,and,or,not,xor,of,lambda},
  keywordstyle=\color{myred},       % keyword style
  %ndkeywords={0,1,2,3,4,5,6,7,8,9,.},
  %ndkeywordstyle=\color{mygreen},
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stringstyle=\color{myyellow},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of
  numbers=left,
  numbersep=5pt,
  numberstyle=\tiny\color{mygray},
  framexleftmargin=4pt,
  framextopmargin=1pt,
  framexbottommargin=1pt,
  frame=tb,
  framerule=0pt
   }
   
\lstdefinestyle{python}
   {
  inputencoding=utf8,
  texcl=true,
	frame=single,
	language=python,
	backgroundcolor=\color{backgray},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
  basicstyle=\scriptsize\ttfamily,        % the size of the fonts that are used for the code
  breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
  breaklines=true,                 % sets automatic line breaking
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{myblue},    % comment style
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
  keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
  keywordstyle=\color{myred},       % keyword style
  %ndkeywords={0,1,2,3,4,5,6,7,8,9,.},
  %ndkeywordstyle=\color{mygreen},
  showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
  showstringspaces=false,          % underline spaces within strings only
  showtabs=false,                  % show tabs within strings adding particular underscores
  stringstyle=\color{myyellow},     % string literal style
  tabsize=2,	                   % sets default tabsize to 2 spaces
  title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of
  numbers=left,
  numbersep=5pt,
  numberstyle=\tiny\color{mygray},
  framexleftmargin=4pt,
  framextopmargin=1pt,
  framexbottommargin=1pt,
  frame=tb,
  framerule=0pt
}


\lstdefinestyle{ocaml}
{
	inputencoding=utf8,
	texcl=true,
	frame=single,
	language=caml,
	backgroundcolor=\color{backgray},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
	basicstyle=\scriptsize\ttfamily,        % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	captionpos=b,                    % sets the caption-position to bottom
	commentstyle=\color{myblue},    % comment style
	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	keywordstyle=\color{myred},       % keyword style
	%ndkeywords={0,1,2,3,4,5,6,7,8,9,.},
	%ndkeywordstyle=\color{mygreen},
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stringstyle=\color{myyellow},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
	title=\lstname,                  % show the filename of files included with \lstinputlisting; also try caption instead of
	numbers=left,
	numbersep=5pt,
	numberstyle=\tiny\color{mygray},
	framexleftmargin=4pt,
	framextopmargin=1pt,
	framexbottommargin=1pt,
	frame=tb,
	framerule=0pt
}


\lstdefinestyle{Consola}
   {basicstyle=\scriptsize\bf\ttfamily,
    backgroundcolor=\color{gray30},
    escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
    frame=single,
    numbers=none
   }


\newcommand{\bigrule}{\titlerule[0.5mm]}


%Para conseguir que en las páginas en blanco no ponga cabecerass
\makeatletter
\def\clearpage{%
  \ifvmode
    \ifnum \@dbltopnum =\m@ne
      \ifdim \pagetotal <\topskip
        \hbox{}
      \fi
    \fi
  \fi
  \newpage
  \thispagestyle{empty}
  \write\m@ne{}
  \vbox{}
  \penalty -\@Mi
}
\makeatother

\usepackage{pdfpages}

% acronyms
\usepackage{acronym}
\usepackage{pdflscape}
\usepackage{float}


\begin{document}

\input{portada/portada}
\input{prefacios/prefacio}
\frontmatter
\tableofcontents
\listoffigures

\newpage
\section*{\Huge\bfseries Listado de acrónimos}
\bigskip
\bigskip
\begin{acronym}[AOT] % Give the longest label here so that the list is nicely aligned
	\acro{AOT}{Antes de tiempo (Ahead Of Time). Se utiliza para describir el tipo de compilación que se realiza antes de la ejecución.}
	\acro{BNF}{Notación de Backus-Naur (Backus-Naur form).}
	\acro{DSL}{Lenguaje de dominio específico (Domain Specific Language).}
	\acro{GC}{Recolector de basura (Garbage Collector).}
	\acro{IA}{Inteligencia Artificial.}
	\acro{JIT}{En el mismo momento (Just In Time). Se utiliza para describir el tipo de compilación que se realiza durante la ejecución.}
\end{acronym}

\mainmatter
\setlength{\parskip}{5pt}

\mathlig{|->}{\mapsto}
\newpage
\input{capitulos/01_Introduccion}
%
\input{capitulos/02_Teoria_de_tipos}
%
\input{capitulos/03_Sistemas_de_calculo_y_de_tipos}
%
\input{capitulos/04_Aplicacion_a_la_IA}
%
\input{capitulos/05_Descripcion_y_formalizacion_de_tail}
%
\input{capitulos/06_Implementacion_de_tail}
%
\input{capitulos/07_Conclusiones}
%\input{capitulos/07_Pruebas}
%
%\input{capitulos/08_Conclusiones}
%
%%\chapter{Conclusiones y Trabajos Futuros}
%
%
\nocite{*}
\bibliography{bibliografia}\addcontentsline{toc}{chapter}{Bibliografía}
\bibliographystyle{plain}
%\bibliographystyle{miunsrturl}
%
\begin{appendices}
\renewcommand{\thesection}{\Alph{section}}
\input{apendices/A2_SintaxisTail}
\newpage
\input{apendices/A3_EvaluacionTail}
\newpage
\input{apendices/A4_TiposTail}
\end{appendices}

%\input{glosario/entradas_glosario}
% \addcontentsline{toc}{chapter}{Glosario}
% \printglossary
\chapter*{}
\thispagestyle{empty}

\end{document}
